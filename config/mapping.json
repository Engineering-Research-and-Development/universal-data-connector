{
  "version": "2.0.0",
  "updated": "2026-02-13T10:00:00.000Z",
  "discoveryMode": true,
  "description": "Universal Data Connector - Device Mapping Configuration",
  "devices": [
    {
      "id": "opcua_cartif_server",
      "type": "OPC_UA_Server",
      "sourceType": "opcua",
      "discovered": "2026-02-13T09:30:00.000Z",
      "enabled": true,
      "measurements": [
        {
          "id": "temperature",
          "name": "Temperature Sensor 1",
          "type": "float",
          "unit": "째C",
          "description": "Main temperature sensor",
          "sourcePath": "nodes.ns=2;s=Temperature.value",
          "transform": {
            "type": "scale",
            "factor": 0.1,
            "offset": 0
          },
          "opcua": {
            "nodeId": "ns=2;s=Temperature",
            "dataType": "Double",
            "browseName": "Temperature"
          }
        },
        {
          "id": "pressure",
          "name": "Pressure Sensor",
          "type": "float",
          "unit": "bar",
          "description": "System pressure",
          "sourcePath": "nodes.ns=2;s=Pressure.value",
          "transform": null,
          "opcua": {
            "nodeId": "ns=2;s=Pressure",
            "dataType": "Double",
            "browseName": "Pressure"
          }
        },
        {
          "id": "motor_status",
          "name": "Motor Running Status",
          "type": "bool",
          "unit": null,
          "description": "Motor on/off status",
          "sourcePath": "nodes.ns=2;s=MotorStatus.value",
          "transform": null,
          "opcua": {
            "nodeId": "ns=2;s=MotorStatus",
            "dataType": "Boolean",
            "browseName": "MotorStatus"
          }
        }
      ],
      "metadata": {
        "endpoint": "opc.tcp://127.0.0.1:4840",
        "serverInfo": {
          "applicationName": "CARTIF OPC UA Server",
          "productUri": "urn:cartif:opcua:server"
        }
      }
    },
    {
      "id": "modbus_unit1_plc",
      "type": "Modbus_PLC",
      "sourceType": "modbus",
      "discovered": "2026-02-13T09:35:00.000Z",
      "enabled": true,
      "measurements": [
        {
          "id": "holding_temperature",
          "name": "Temperature from Holding Register",
          "type": "float",
          "unit": "째C",
          "description": "Temperature reading",
          "sourcePath": "registers.holding_temperature",
          "transform": {
            "type": "scale",
            "factor": 0.1
          },
          "modbus": {
            "registerType": "holding",
            "address": 0
          }
        },
        {
          "id": "input_speed",
          "name": "Motor Speed",
          "type": "int",
          "unit": "rpm",
          "description": "Motor rotation speed",
          "sourcePath": "registers.input_speed",
          "transform": null,
          "modbus": {
            "registerType": "input",
            "address": 10
          }
        },
        {
          "id": "coil_pump_status",
          "name": "Pump Status",
          "type": "bool",
          "unit": null,
          "description": "Pump running state",
          "sourcePath": "registers.coil_pump_status",
          "transform": null,
          "modbus": {
            "registerType": "coil",
            "address": 0
          }
        }
      ],
      "metadata": {
        "unitId": 1,
        "host": "192.168.1.10",
        "port": 502
      }
    },
    {
      "id": "mqtt_sensori_dati",
      "type": "MQTT_Sensor",
      "sourceType": "mqtt",
      "discovered": "2026-02-13T09:40:00.000Z",
      "enabled": true,
      "measurements": [
        {
          "id": "humidity",
          "name": "Humidity",
          "type": "float",
          "unit": "%",
          "description": "Relative humidity",
          "sourcePath": "payload.humidity",
          "transform": {
            "type": "round",
            "decimals": 2
          }
        },
        {
          "id": "ambient_temp",
          "name": "Ambient Temperature",
          "type": "float",
          "unit": "째C",
          "description": "Room temperature",
          "sourcePath": "payload.temperature",
          "transform": {
            "type": "round",
            "decimals": 1
          }
        },
        {
          "id": "battery_level",
          "name": "Battery Level",
          "type": "int",
          "unit": "%",
          "description": "Battery charge level",
          "sourcePath": "payload.battery",
          "transform": null
        }
      ],
      "metadata": {
        "topic": "sensori/dati",
        "broker": "mqtt://localhost:1883"
      }
    },
    {
      "id": "http_weather_api",
      "type": "HTTP_Weather_Station",
      "sourceType": "http",
      "discovered": "2026-02-13T09:45:00.000Z",
      "enabled": false,
      "measurements": [
        {
          "id": "outdoor_temp",
          "name": "Outdoor Temperature",
          "type": "float",
          "unit": "째C",
          "description": "Outside temperature",
          "sourcePath": "main.temp",
          "transform": {
            "type": "formula",
            "formula": "(x - 273.15)"
          }
        },
        {
          "id": "wind_speed",
          "name": "Wind Speed",
          "type": "float",
          "unit": "m/s",
          "description": "Wind speed",
          "sourcePath": "wind.speed",
          "transform": null
        }
      ],
      "metadata": {
        "url": "https://api.openweathermap.org/data/2.5/weather",
        "method": "GET"
      }
    }
  ],
  "outputFormats": {
    "json": {
      "enabled": true,
      "includeMetadata": true
    },
    "toon": {
      "enabled": true,
      "compact": true
    }
  },
  "transport": {
    "nats": {
      "enabled": true,
      "subject": "udc.data"
    },
    "mqtt": {
      "enabled": true,
      "broker": "mqtt://localhost:1883",
      "baseTopic": "udc/data",
      "format": "json"
    },
    "http": {
      "enabled": false,
      "endpoint": "http://localhost:8080/api/data",
      "method": "POST",
      "batchSize": 10,
      "format": "json"
    }
  }
}
